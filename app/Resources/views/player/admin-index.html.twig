{% extends 'admin.html.twig' %}

{% block admin_body %}
    <h1>Zawodnicy</h1>
    {% if is_granted('ROLE_ADMIN') %}
    <a href="{{ path('player_new') }}" class="btn btn-success">
        <i class="fa fa-plus" aria-hidden="true"></i> 
        Dodaj
    </a>
    {% endif %} 
    <div class="admin-box"> 
        <table class="table data-table">
            <thead>
                <tr>
                    <th></th>
                    <th>Imię</th>
                    <th><i class="fa fa-sort" aria-hidden="true"></i> Nazwisko</th>
                    <th><i class="fa fa-sort" aria-hidden="true"></i> Email rodzica</th>
                    <th><i class="fa fa-sort" aria-hidden="true"></i> Data urodzenia</th>
                    <th><i class="fa fa-sort" aria-hidden="true"></i> Pozycja</th>
                    <th><i class="fa fa-sort" aria-hidden="true"></i> Grupa</th>
                    <th>Edycja</th>
                </tr>
            </thead>
            <tbody>
            {% for player in players %}
                <tr>
                    <td></td>
                    <td>{{ player.firstName }}</td>
                    <td>{{ player.lastName }}</td>
                    <td>
                        {% if player.parentEmail %}
                            {{ player.parentEmail }}
                        {% else %}
                            ---
                        {% endif %}                    
                    </td>
                    <td>
                        {% if player.birthDate %}
                            {{ player.birthDate|date('Y-m-d') }}
                        {% endif %}
                    </td>
                    <td>{{ player.position }}</td>
                    <td>
                        {% if player.team %}
                            {{ player.team.name }} {{ player.team.year }}
                        {% endif %}
                    </td>
                    <td class="col-md-2">
                    {% if is_granted('ROLE_ADMIN') %}
                        <a href="{{ path('admin_player_show', { 'id': player.id }) }}" class="btn btn-default btn-sm pull-left admin-form-btn-margin">
                            Pokaż
                        </a>                        
                        <a href="{{ path('player_edit', { 'id': player.id }) }}" class="btn btn-primary btn-sm pull-left admin-form-btn-margin">
                            Edytuj
                        </a>
                        <form action="{{ path('player_delete', { 'id': player.id }) }}" method="post">
                            {{ form_widget(deleteForms[player.id]) }}
                            <input type="submit" class="btn btn-danger btn-sm" value="Usuń">
                        </form>                             
                    {% endif %}                    
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
