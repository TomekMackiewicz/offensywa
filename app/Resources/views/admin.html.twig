<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>{% block title %}Admin{% endblock %}</title>
        {% block stylesheets %}
            <link rel="stylesheet" 
                  href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
                  integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
                  crossorigin="anonymous"
            >
            <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            {#<link rel="stylesheet" href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"> #} 
            <link href="https://fonts.googleapis.com/css?family=Montserrat:700|Open+Sans:400,600" rel="stylesheet">            
            <link rel="stylesheet" href="{{ asset('/css/style.css') }}">
            <link rel="stylesheet" href="{{ asset('/css/fullcalendar.min.css') }}">
            <link rel="stylesheet" href="{{ asset('/css/data-tables.css') }}">
        {% endblock %}
        <link rel="icon" type="image/x-icon" href="{{ asset('favicon.ico') }}" />
    </head>
    <body>
        <div class="container-fluid">
            {% include 'admin-navbar.html.twig' %}
        </div>
        <div class="container-fluid admin-main">
            <div class="row"> 
                <div class="col-xs-2 col-fluid">
                    {% include 'admin-sidebar.html.twig' %}
                </div>
                <div class="col-xs-10">
                    {% block admin_body %}{% endblock %}
                </div>
            </div>    
        </div>
        <footer class="footer">
            <div class="container-fluid">
                {% include 'footer.html.twig' %}
            </div>
        </footer>                
        {% block javascripts %}
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
            <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
                    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
                    crossorigin="anonymous">
            </script>
            <script src="{{ asset('/js/timepicker.js') }}"></script>
            <script src="{{ asset('/js/moment.min.js') }}"></script>
            <script src="{{ asset('/js/fullcalendar.min.js') }}"></script>
            <script src="{{ asset('/js/data-tables.js') }}"></script>
            <script>
                $(document).ready(function() {
                    $('#calendar').fullCalendar({
                        // put your options and callbacks here
                    }); 
                    
                    $('.btn-danger').on('click', function(e) {
                        e.preventDefault();
                        confirmDelete(this.closest("form"));
                    });

                    function confirmDelete(form) {
                        var result = confirm('Are you sure you want to delete this question?');
                        if (result === true) {
                            $(form).submit();
                        }
                    }; 
                    
                    $(function(){
                        $("#bars li .bar").each(function(key, bar){
                            var percentage = $(this).data('percentage');

                            $(this).animate({
                                'height':percentage+'%'
                            }, 1000);
                        });
                    });                     
                });               
            </script>
            <script>
                $(function() {
                    $(".datetimepicker").datetimepicker({
                        timeFormat: 'HH:mm',
                        dateFormat : 'dd-mm-yy'
                        //controlType: 'select'
                        //addSliderAccess: true,
                        //sliderAccessArgs: { touchonly: true }
                    });                    
                });
                $(function() {
                    $(".datepicker").datepicker({
                        dateFormat : 'dd-mm-yy'
                    });                    
                });
{#                $(function() {
                    $(".daypicker").datetimepicker({
                        timeFormat: 'HH:mm',
                        dateFormat : 'DD'
                    });                    
                });#}
                $(function() {
                    var startDateTextBox = $('.startDate');
                    var endDateTextBox = $('.endDate');
                    
                    $.timepicker.timeRange(
                    startDateTextBox,
                    endDateTextBox,
                    {
                        minInterval: (1000*60*60),
                        timeFormat: 'HH:mm',
                        start: {}, // start picker options
                        end: {} // end picker options					
                    });
                });                
            </script>  
            <script>
                $(function() {
                    var $homeTeam = $('#appbundle_game_homeTeam');
                    $homeTeam.change(function() {
                      var $form = $(this).closest('form');
                      var data = {};
                      data[$homeTeam.attr('name')] = $homeTeam.val();
                      $.ajax({
                        url : $form.attr('action'),
                        type: $form.attr('method'),
                        data : data,
                        success: function(html) {
                          $('#appbundle_game_awayTeam').replaceWith(
                            $(html).find('#appbundle_game_awayTeam')
                          );
                        }
                      });
                    });                    
                });                
            </script>
            <script>
                $(function() {
                    var matchDateInput = $('#appbundle_game_date');
                    if(typeof matchDateInput.val() !== 'undefined') {
                        var now = new Date();                        
                        var homeTeamScore = $('#appbundle_game_homeTeamScore');
                        var awayTeamScore = $('#appbundle_game_awayTeamScore');
                        if(!matchDateInput.val().trim()) {
                            $("#appbundle_game_homeTeamScore").prop('disabled', true);
                            $("#appbundle_game_awayTeamScore").prop('disabled', true);                        
                        } else {
                            var splitHours = matchDateInput.val().split(" ");
                            var splitMinutes = splitHours[1].split(":"); 
                            var splitDate = splitHours[0].split("-");
                            var matchDate = new Date(splitDate[2], splitDate[1] - 1, splitDate[0]);
                            matchDate.setHours(splitMinutes[0],splitMinutes[1]);
                            if(matchDate < now) {
                                $("#appbundle_game_homeTeamScore").prop('disabled', false);
                                $("#appbundle_game_awayTeamScore").prop('disabled', false);                                
                            } else {
                                $("#appbundle_game_homeTeamScore").prop('disabled', true);
                                $("#appbundle_game_awayTeamScore").prop('disabled', true);                                 
                            }
                        
                        }
                        
                        matchDateInput.change(function() {
                            var splitHours = matchDateInput.val().split(" ");
                            var splitMinutes = splitHours[1].split(":"); 
                            var splitDate = splitHours[0].split("-");
                            var matchDate = new Date(splitDate[2], splitDate[1] - 1, splitDate[0]);
                            matchDate.setHours(splitMinutes[0],splitMinutes[1]);

                            if(matchDate > now || !matchDateInput.val().trim()) {
                                $("#appbundle_game_homeTeamScore").prop('disabled', true);
                                $("#appbundle_game_awayTeamScore").prop('disabled', true);                        
                            } else {
                                $("#appbundle_game_homeTeamScore").prop('disabled', false);
                                $("#appbundle_game_awayTeamScore").prop('disabled', false);                        
                            }                    
                        });                         
                    }                   
                });
            </script>
            <script>
                $(document).ready(function() {
                    var t = $('.data-table').DataTable( {
                        "columnDefs": [ {
                            "searchable": false,
                            "orderable": false,
                            "targets": 0
                        } ],
                        "order": [[ 1, 'asc' ]],
                        language: {
                            processing:     "Przetwarzam...",
                            search:         "Szukaj:",
                            lengthMenu:    "Pokazuj _MENU_ elementów",
                            info:           "Pokazuje od _START_ do _END_ z _TOTAL_ elementów",
                            infoEmpty:      "Pokazuje od 0 do 0 z 0 elementów",
                            infoFiltered:   "(z _MAX_ elementów ogółem)",
                            infoPostFix:    "",
                            loadingRecords: "Ładuję...",
                            zeroRecords:    "Brak wyników",
                            emptyTable:     "Pusta tablica",
                            paginate: {
                                first:      "Pierwsza",
                                previous:   "Poprzednia",
                                next:       "Następna",
                                last:       "Ostatnia"
                            },
                            aria: {
                                sortAscending:  ": activer pour trier la colonne par ordre croissant",
                                sortDescending: ": activer pour trier la colonne par ordre décroissant"
                            }
                        }                         
                    });

                    t.on( 'order.dt search.dt', function () {
                        t.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
                            cell.innerHTML = i+1;
                        } );
                    }).draw();
                });                
            </script>            
        {% endblock %}              
    </body>
</html>

